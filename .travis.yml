os: linux

install: make get-deps

language: cpp

sudo: required

dist: trusty

addons:
  apt:
    sources:
    # add PPAs with more up-to-date toolchains
    - ubuntu-toolchain-r-test
#    - llvm-toolchain-precise-3.6
 
    packages:
    # install toolchains
    - gcc-5
    - g++-5
 
    env:
    - CC=gcc-5
    - CXX=g++-5

before_install:
  - sudo sh -c 'echo "/usr/local/lib" > /etc/ld.so.conf.d/openmpi.conf'
  - sudo ldconfig
  - sudo ldconfig -v | grep -v ^$'\t'
  - sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 20
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5 20
  - wget --no-check-certificate https://www.open-mpi.org/software/ompi/v1.10/downloads/openmpi-1.10.3.tar.gz
  - tar -zxvf openmpi-1.10.3.tar.gz
  - cd openmpi-1.10.3
  - ./configure --enable-mpi-thread-multiple && make && sudo make install
  - wget --no-check-certificate http://www.hdfgroup.org/ftp/HDF5/current/src/hdf5-1.8.17.tar.gz
  - tar -zxvf hdf5-1.8.17.tar.gz
  - cd hdf5-1.8.17
  - CC=mpicc CXX=mpicxx ./configure --enable-parallel && make && sudo make install
  - cat .travis.yml
  - sudo apt-get -qq update
  - sudo apt-get install -y python-dev

script:
  - git checkout -b travis
  - git tag -a v1.0 -m "travis 1.0"
  - HDF5_ROOT_DIR=hdf5-1.8.17/hdf5 make

install:





